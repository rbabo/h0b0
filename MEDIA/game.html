<head>
    <style>
        body {
            margin: 0;
        }

        canvas {
            background: #eee;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <script>

        // canvas variables
        let canvas = document.getElementById("gameCanvas");
        let ctx = canvas.getContext("2d");

        // game variables
        let playerWidth = 50;
        let playerHeight = 50;
        let playerX = (canvas.width - playerWidth) / 2;
        let playerY = canvas.height - playerHeight;
        let playerSpeed = 5;
        let rightPressed = false;
        let leftPressed = false;
        let spacePressed = false;
        let jumping = false;
        let doubleJumping = false;
        let jumpStartY = 0;
        let jumpStartTime = 0;
        let jumpHeight = 200; // adjust this value to change jump height
        let jumpDirection = "up";

        // obstacle variables
        let obstacleWidth = 50;
        let obstacleHeight = 50;
        let obstacleX = Math.floor(Math.random() * (canvas.width - obstacleWidth));
        let obstacleY = -obstacleHeight;
        let obstacleSpeed = 5;

        // item variables
        let itemWidth = 50;
        let itemHeight = 50;
        let itemX = Math.floor(Math.random() * (canvas.width - itemWidth));
        let itemY = -itemHeight;
        let itemSpeed = 5;

        // load player image
        let playerImage = new Image();
        playerImage.src = "pixel.gif";

        // load obstacle image
        let obstacleImage = new Image();
        obstacleImage.src = "readme.png";

        // load item image
        let itemImage = new Image();
        itemImage.src = "dandelion_solos.png";

        // handle key down events
        document.addEventListener("keydown", keyDownHandler, false);

        // handle key up events
        document.addEventListener("keyup", keyUpHandler, false);

        // handle key down events
        function keyDownHandler(e) {
            if (e.key === "Right" || e.key === "ArrowRight") {
                rightPressed = true;
            } else if (e.key === "Left" || e.key === "ArrowLeft") {
                leftPressed = true;
            } else if (e.key === " " || e.key === "Spacebar") {
                spacePressed = true;
            }
        }

        // handle key up events
        function keyUpHandler(e) {
            if (e.key === "Right" || e.key === "ArrowRight") {
                rightPressed = false;
            } else if (e.key === "Left" || e.key === "ArrowLeft") {
                leftPressed = false;
            } else if (e.key === " " || e.key === "Spacebar") {
                spacePressed = false;
            }
        }

        // handle player movement
        function movePlayer() {
            console.log(`playerY: ${playerY}`);

            // check for left and right arrow keys
            if (rightPressed && playerX < canvas.width - playerWidth) {
                playerX += playerSpeed;
            } else if (leftPressed && playerX > 0) {
                playerX -= playerSpeed;
            }

            // check for spacebar key (jump)
            if (spacePressed && !jumping && !doubleJumping) {
                jumping = true;
                jumpStartY = playerY; // save current y position
            } else if (spacePressed && jumping && !doubleJumping) {
                doubleJumping = true;
                jumpStartY = playerY; // save current y position
            }

            // update player y position for jump
            if (jumping || doubleJumping) {
                // calculate how much time has passed since jump started
                let time = Date.now() - jumpStartTime;

                // update y position based on time and initial y position
                playerY = jumpStartY - (playerSpeed * 2 * time / 1000);

                // check if player has reached maximum jump height
                if (playerY < jumpStartY - jumpHeight) {
                    playerY = jumpStartY - jumpHeight;
                    jumpDirection = "down"; // start moving player down
                }
            }

            // move player down if at maximum jump height
            if (jumpDirection === "down") {
                playerY += playerSpeed;
            }

            // reset jumping and double jumping when player lands on ground
            if (playerY === canvas.height - playerHeight) {
                jumping = false;
                doubleJumping = false;
                jumpDirection = "up"; // reset jump direction
            }
        }

        // handle obstacle movement
        function moveObstacle() {
            obstacleY += obstacleSpeed;
        }

        // handle item movement
        function moveItem() {
            itemY += itemSpeed;
        }

        // draw player
        function drawPlayer() {
            ctx.drawImage(playerImage, playerX, playerY, playerWidth, playerHeight);
        }

        // draw obstacle
        function drawObstacle() {
            ctx.drawImage(obstacleImage, obstacleX, obstacleY, obstacleWidth, obstacleHeight);
        }

        // draw item
        function drawItem() {
            ctx.drawImage(itemImage, itemX, itemY, itemWidth, itemHeight);
        }

        // main game loop
        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // clear canvas

            movePlayer(); // move player
            moveObstacle(); // move obstacle
            moveItem(); // move item

            drawPlayer(); // draw player
            drawObstacle(); // draw obstacle
            drawItem(); // draw item

            requestAnimationFrame(draw); // request next frame
        }

        draw(); // start game loop




    </script>

</body>

</html>