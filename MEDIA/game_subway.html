<script src="//cdn.jsdelivr.net/npm/phaser@3.55.2/dist/phaser.js"></script>
<script>
    // Initialize the game
    var game = new Phaser.Game(800, 600, Phaser.AUTO, 'game-container', { preload: preload, create: create });

    // Load assets
    function preload() {
        game.load.image('player', 'assets/player.png');
        game.load.image('obstacle', 'assets/obstacle.png');
    }

    // Create the game world
    function create() {
        game.player = game.add.sprite(game.width / 2, game.height / 2, 'player');
        game.player.anchor.setTo(0.5, 0.5);
        game.player.scale.setTo(0.5, 0.5);
        game.physics.enable(game.player, Phaser.Physics.ARCADE);
        game.player.body.collideWorldBounds = true;
        game.player.body.gravity.y = 500;

        game.cursors = game.input.keyboard.createCursorKeys();

        game.obstacles = game.add.group();
        game.obstacles.enableBody = true;
        game.obstacles.physicsBodyType = Phaser.Physics.ARCADE;
        game.obstacles.createMultiple(20, 'obstacle');
        game.time.events.loop(Phaser.Timer.SECOND, spawnObstacle, this);
    }

    // Update the game state
    function update() {
        game.physics.arcade.collide(game.player, game.obstacles, hitObstacle, null, this);
        game.player.body.velocity.x = 0;

        if (game.cursors.left.isDown) {
            game.player.body.velocity.x = -150;
        }
        else if (game.cursors.right.isDown) {
            game.player.body.velocity.x = 150;
        }

        if (game.cursors.up.isDown && game.player.body.onFloor()) {
            game.player.body.velocity.y = -250;
        }
    }

    // Spawn a new obstacle
    function spawnObstacle() {
        var obstacle = game.obstacles.getFirstDead();
        obstacle.reset(game.width, game.height - 50);
        obstacle.body.velocity.x = -200;
        obstacle.checkWorldBounds = true;
        obstacle.outOfBoundsKill = true;
    }

    // Handle collision with an obstacle
    function hitObstacle(player, obstacle) {
        game.state.restart();
    }
</script>